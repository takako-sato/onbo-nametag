# 画像に「施策名 名前」を入れるツール（Python 版）

複数画像の**中央下**に、比率に合わせた文字サイズで「施策名 名前」を一括で入れます。

- **施策名**: 日付や配信名など、毎回引数で指定
- **名前**: `-n` / `--name` で指定（省略時は「佐藤貴子」）
- **スタイル**: テキストは太字・色は #565CAA、白背景＋余白付きで表示
- **デフォルト**: ファイル名は変えず、**元画像をその場で上書き**

## 準備

```bash
pip install -r requirements_image_caption.txt
```

## 使い方

### 1. フォルダを渡すだけ（推奨）

```bash
python add_caption_to_images.py "20260217配信" ./画像フォルダ
```

- **フォルダ＞画像** でも **フォルダ＞フォルダ＞画像** でも、配下の全階層を自動で走査します。
- 見つかった画像は**同じパスのまま上書き**（ファイル名は変更しません）。
- 複数フォルダを渡せます: `"施策名" ./フォルダA ./フォルダB`

### 2. 名前を変える（他の人が使う場合）

```bash
python add_caption_to_images.py "施策名" ./画像フォルダ --name "山田太郎"
```

### 3. 別フォルダに出力したい場合（上書きしない）

```bash
python add_caption_to_images.py "施策名" ./元画像 -o ./出力フォルダ
```

### 4. 文字サイズや余白を変える

```bash
python add_caption_to_images.py "施策名" ./画像フォルダ --text-size 0.06
python add_caption_to_images.py "施策名" ./画像フォルダ --margin 0.06
```

## オプション一覧

| オプション | 説明 | デフォルト |
|-----------|------|------------|
| `-n`, `--name` | 名前 | 佐藤貴子 |
| `-o`, `--output-dir` | 出力フォルダ（指定時のみ別フォルダへ出力） | なし（元画像を上書き） |
| `--suffix` | `-o` 使用時のファイル名接尾辞 | なし |
| `--text-size` | 文字サイズの比率（画像の短辺に対する割合） | `0.045` |
| `--margin` | 下余白の比率 | `0.04` |
| `--padding` | テキスト周りの白背景の余白の比率 | `0.015` |

## フォント

日本語表示のため、次のいずれかが使われます（環境によって自動選択）。

- Mac: ヒラギノ角ゴシック / Arial Unicode
- Windows: Meiryo / MS Gothic

インストールされていない場合は、`~/Library/Fonts/` などに Noto Sans CJK を置くと利用できます。
